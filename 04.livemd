<!-- livebook:{"hub_id":"team-weiz"} -->

# 04

## Section

```elixir
example = """
MMMSXXMASM
MSAMXMSMSA
AMXSXMAAMM
MSAMASMSMX
XMASAMXAMM
XXAMMXXAMA
SMSMSASXSS
SAXAMASAAA
MAMMMXMMMM
MXMXAXMASX
"""
```

```elixir
defmodule Day04 do
  def into_map(input, whilte_list) do
    for {row, y} <- input |> String.split("\n", trim: true) |> Enum.with_index(),
        {c, x} <- row |> String.split("", trim: true) |> Enum.with_index(),
        c in whilte_list,
        into: %{} do
      {{x, y}, c}
    end
  end

  def part1(input) do
    map = into_map(input, ["X", "M", "A", "S"])

    for {start, "X"} <- map,
        xadd <- -1..1,
        yadd <- -1..1,
        xadd == yadd != 0,
        xmas(map, start, xadd, yadd),
        reduce: 0 do
      acc -> acc + 1
    end
  end

  def xmas(map, {x, y}, xadd, yadd) do
    Map.get(map, {x + xadd, y + yadd}) == "M" &&
      Map.get(map, {x + xadd * 2, y + yadd * 2}) == "A" &&
      Map.get(map, {x + xadd * 3, y + yadd * 3}) == "S"
  end

  def part2(input) do
    map = into_map(input, ["M", "A", "S"])

    for {start, "A"} <- map,
        xadd <- [1, -1],
        yadd <- [1, -1],
        x_mas(map, start, xadd, yadd) do
      start
    end
    |> Enum.frequencies()
    |> Enum.count(&(elem(&1, 1) == 2))
  end

  def x_mas(map, {x, y}, xadd, yadd) do
    Map.get(map, {x + xadd, y + yadd}) == "M" && Map.get(map, {x - xadd, y - yadd}) == "S"
  end
end

Day04.part1(example)
Day04.part2(example)
```

<!-- livebook:{"offset":1452,"stamp":{"token":"XCP.YPrIL6GUo15Gcyep0C6apB68Y3MhnF5GOekOCMyPODi-HUsDj6y8GfTlHcBwcg","token_signature":"lcAJCZHeMfC7RYfxH01CGeeKDTT-nEVGb1bN9D9frDKbTAxmYQhfRn1e1FTDHUcAybKtVug75Q_p5cY7SESB-RJuc_J7PEcxy1aKPEaWP7vTScVdPvEPDIGkPYHHVIZALweV1XzKR3GEBZzTVl-i_iS8z_SbvlV-IwT-Dj5nakmBDde2XqmxNsQ0lcQXAB4U2ip7B6ufSdQ_TyWFaO-9RB3U98-GGpXtSp8NnxZaZN0OkzHAfgCk8acmKr-oUPUCSHcEbbH6Eh8wGJU-wL3op1e9K8opQ1aJT_VLx61HbdNLObvCBwBWuMmnhyAyAZGWykoSFu7XbHeABtKN5jpSng","version":1}} -->
